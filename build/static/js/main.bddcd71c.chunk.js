(this.webpackJsonpfncs=this.webpackJsonpfncs||[]).push([[0],{27:function(t,e,a){t.exports=a(46)},32:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){},43:function(t,e,a){},46:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(23),o=a.n(r),s=a(2),c=a(3),l=a(5),u=a(4),m=a(6),p=a(10),h=(a(32),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={homeSectionActive:"active",loginSectionActive:"none-active",profileSectionActive:"none-active"},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"isHomeSection",value:function(){this.setState({homeSectionActive:"active",loginSectionActive:"none-active",profileSectionActive:"none-active"})}},{key:"isLoginSection",value:function(){this.setState({homeSectionActive:"none-active",loginSectionActive:"active",profileSectionActive:"none-active"})}},{key:"isProfileSection",value:function(){this.setState({homeSectionActive:"none-active",loginSectionActive:"none-active",profileSectionActive:"active"})}},{key:"render",value:function(){var t,e;return this.props.connected?e=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.b,{className:this.state.homeSectionActive,onClick:this.isHomeSection.bind(this),to:"/purchase"},"Accueil"),i.a.createElement(p.b,{className:this.state.profileSectionActive,onClick:this.isProfileSection.bind(this),to:"/profile"},"Mon compte"),i.a.createElement(p.b,{to:"/logout"},"D\xe9connexion")):t=i.a.createElement(i.a.Fragment,null,i.a.createElement(p.b,{className:this.state.homeSectionActive,onClick:this.isHomeSection.bind(this),to:"/"},"Accueil"),i.a.createElement(p.b,{className:this.state.loginSectionActive,onClick:this.isLoginSection.bind(this),to:"/login"},"Connexion")),i.a.createElement("div",{className:"topnav"},t,e)}}]),e}(n.Component)),d=a(11),v=a(12),f=a.n(v),S=a(15),b=(a(39),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={email:"eve.holt@reqres.in",password:"cityslicka"},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"onChangeEmail",value:function(t){this.setState({email:t.target.value})}},{key:"onChangePassword",value:function(t){this.setState({password:t.target.value})}},{key:"login",value:function(){var t=Object(S.a)(f.a.mark((function t(){var e,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.fetchLogin(),t.next=3,e;case 3:return a=t.sent.json(),t.next=6,e;case 6:if(t.t0=t.sent.status,200===t.t0){t.next=9;break}return t.abrupt("return");case 9:return t.t1=localStorage,t.next=12,a;case 12:t.t2=t.sent.token,t.t1.setItem.call(t.t1,"auth_token",t.t2),localStorage.setItem("email",this.state.email),window.location.assign("/purchase");case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetchLogin",value:function(){return fetch("https://reqres.in/api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,password:this.state.password})})}},{key:"onSubmitForm",value:function(t){this.login(),t.preventDefault()}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("form",{id:"formLogin",onSubmit:this.onSubmitForm.bind(this)},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Email",defaultValue:this.state.email,onChange:this.onChangeEmail.bind(this)}),i.a.createElement("br",null),i.a.createElement("input",{type:"password",className:"form-control",placeholder:"Mot de passe",defaultValue:this.state.password,onChange:this.onChangePassword.bind(this)}),i.a.createElement("br",null),i.a.createElement("button",{type:"submit",className:"form-control"},"login"))))}}]),e}(n.Component)),g=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){localStorage.clear(),window.location.assign("/")}},{key:"render",value:function(){return i.a.createElement(d.a,{to:"/"})}}]),e}(n.Component),y=a(19),E=(a(40),a(41),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={priceTicket:20},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"getListStationsPurchased",value:function(){var t=localStorage.getItem("stations");return t?JSON.parse(t):[]}},{key:"saveStationBought",value:function(){var t=this.getListStationsPurchased(),e=[this.props.arrivalStation,this.props.departureStation,this.getPriceReduction()];t.push(e),localStorage.setItem("stations",JSON.stringify(t))}},{key:"onClickBuyingButton",value:function(t){this.saveStationBought()}},{key:"getPriceReduction",value:function(){return localStorage.getItem("promoCode")?this.state.priceTicket/2:this.state.priceTicket}},{key:"getDisplayPrice",value:function(){return i.a.createElement("div",null,i.a.createElement("p",{style:{textDecoration:this.getPriceReduction()!==this.state.priceTicket?"line-through":""}},this.state.priceTicket,"\u20ac"),i.a.createElement("p",{style:{display:this.getPriceReduction()!==this.state.priceTicket?"block":"none"}},"Prix apr\xe8s r\xe9duction : ",this.getPriceReduction(),"\u20ac"))}},{key:"render",value:function(){return i.a.createElement("div",{className:"row schedule"},i.a.createElement("div",{className:"col-lg-3"},i.a.createElement("p",null,this.props.departureStation),i.a.createElement("hr",null),i.a.createElement("p",null,this.props.arrivalStation)),i.a.createElement("div",{className:"col-lg-3"},this.getDisplayPrice()),i.a.createElement("form",{onSubmit:this.onClickBuyingButton.bind(this),className:"col-lg-6"},i.a.createElement("input",{type:"submit",value:"Acheter",className:"form-control"})))}}]),e}(n.Component)),k=(a(42),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={stationList:[]},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"computeStation",value:function(){for(var t=[],e=0;e<10;e++)t.push("9h00");this.setState({stationList:t})}},{key:"componentDidMount",value:function(){this.computeStation()}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{id:"purchaseBlock",className:"col-lg-12"},this.state.stationList.map((function(e,a){return i.a.createElement(E,{key:a,departureStation:t.props.departureStation,arrivalStation:t.props.arrivalStation})})))}}]),e}(n.Component)),C=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={departureStation:"",arrivalStation:"",departureStationSave:"",arrivalStationSave:"",departureListStations:[],arrivalListStations:[],displayDepartureList:!1,displayArrivalList:!1,searchEnabled:!1},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"displayDepartureListStations",value:function(){var t=Object(S.a)(f.a.mark((function t(){var e,a,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==this.state.departureStation){t.next=3;break}return this.setState({departureListStations:[]}),t.abrupt("return");case 3:return e=this.fetchSNCF(this.state.departureStation),t.next=6,e;case 6:return a=t.sent.json(),t.next=9,a;case 9:return t.t0=function(t){return t.fields.pltf_commune_libellemin},n=t.sent.records.map(t.t0),t.t1=this,t.t2=y.a,t.t3=Set,t.next=16,n;case 16:t.t4=t.sent,t.t5=new t.t3(t.t4),t.t6=(0,t.t2)(t.t5),t.t7={departureListStations:t.t6},t.t1.setState.call(t.t1,t.t7);case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"displayArrivalListStations",value:function(){var t=Object(S.a)(f.a.mark((function t(){var e,a,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==this.state.arrivalStation){t.next=3;break}return this.setState({arrivalListStations:[]}),t.abrupt("return");case 3:return e=this.fetchSNCF(this.state.arrivalStation),t.next=6,e;case 6:return a=t.sent.json(),t.next=9,a;case 9:return t.t0=function(t){return t.fields.pltf_commune_libellemin},n=t.sent.records.map(t.t0),t.t1=this,t.t2=y.a,t.t3=Set,t.next=16,n;case 16:t.t4=t.sent,t.t5=new t.t3(t.t4),t.t6=(0,t.t2)(t.t5),t.t7={arrivalListStations:t.t6},t.t1.setState.call(t.t1,t.t7);case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetchSNCF",value:function(t){return fetch("https://ressources.data.sncf.com/api/records/1.0/search/?dataset=referentiel-gares-voyageurs&q="+t)}},{key:"onChangeDepartureStation",value:function(t){this.setState({departureStation:t.target.value,displayDepartureList:!0})}},{key:"onChangeArrivalStation",value:function(t){this.setState({arrivalStation:t.target.value,displayArrivalList:!0})}},{key:"handleCheckDeparture",value:function(t){this.setState({departureStation:t.target.textContent,displayDepartureList:!1})}},{key:"handleCheckArrival",value:function(t){this.setState({arrivalStation:t.target.textContent,displayArrivalList:!1})}},{key:"onSubmitForm",value:function(t){this.setState({departureStationSave:this.state.departureStation,arrivalStationSave:this.state.arrivalStation,searchEnabled:!0}),t.preventDefault()}},{key:"componentDidUpdate",value:function(t,e,a){this.state.departureStation!==e.departureStation&&(this.displayDepartureListStations(),this.setState({displayArrivalList:!1})),this.state.arrivalStation!==e.arrivalStation&&(this.displayArrivalListStations(),this.setState({displayDepartureList:!1}))}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{id:"formStation",className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("form",{className:"col-lg-6",onSubmit:this.onSubmitForm.bind(this)},i.a.createElement("p",null,"Quel est votre trajet ?"),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Saisir votre gare de d\xe9part...",value:this.state.departureStation,onChange:this.onChangeDepartureStation.bind(this)}),i.a.createElement("br",null),i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Saisir votre gare de d'arriv\xe9e...",value:this.state.arrivalStation,onChange:this.onChangeArrivalStation.bind(this)}),i.a.createElement("br",null),i.a.createElement("input",{type:"date",className:"form-control"}),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",className:"form-control"})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement("ul",{className:"list-group",style:{display:this.state.displayDepartureList?"block":"none"}},this.state.departureListStations.map((function(e,a){return i.a.createElement("li",{onClick:t.handleCheckDeparture.bind(t),className:"list-group-item",key:a},e)}))),i.a.createElement("ul",{className:"list-group",style:{display:this.state.displayArrivalList?"block":"none"}},this.state.arrivalListStations.map((function(e,a){return i.a.createElement("li",{onClick:t.handleCheckArrival.bind(t),className:"list-group-item",key:a},e)}))))),i.a.createElement("div",{className:"row",style:{display:this.state.searchEnabled?"block":"none"}},i.a.createElement(k,{departureStation:this.state.departureStation,arrivalStation:this.state.arrivalStation})))}}]),e}(n.Component),N=(a(43),a(26)),j=a.n(N),O=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={promoCode:a.getPromoCode()},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"getPromoCode",value:function(){var t=localStorage.getItem("promoCode");return t||""}},{key:"onChangeInput",value:function(t){this.setState({promoCode:t.target.value})}},{key:"onClickButtonPromoCode",value:function(t){localStorage.setItem("promoCode",this.state.promoCode)}},{key:"getCorrectInputPromoCode",value:function(){return null===localStorage.getItem("stations")?i.a.createElement("div",null,i.a.createElement("p",null,"Code de r\xe9duction"),i.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.state.promoCode,onChange:this.onChangeInput.bind(this)}),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",className:"form-control",value:"Appliquer"})):i.a.createElement("div",null,i.a.createElement("p",null,"Code de r\xe9duction"),i.a.createElement("input",{disabled:!0,type:"text",className:"form-control",defaultValue:this.state.promoCode,onChange:this.onChangeInput.bind(this)}),i.a.createElement("br",null),i.a.createElement("input",{disabled:!0,type:"submit",className:"form-control",value:"Appliquer"}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"card"},i.a.createElement("img",{src:"https://www.gravatar.com/avatar/"+j()(this.props.email)+"?s=286",className:"card-img-top",alt:"hello"}),i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"card-title"},this.props.firstName+" "+this.props.lastName),i.a.createElement("p",{className:"card-title"},this.props.email),i.a.createElement("hr",null),i.a.createElement("form",{onSubmit:this.onClickButtonPromoCode.bind(this)},this.getCorrectInputPromoCode())))}}]),e}(i.a.Component),A=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={tickets:a.getMyTickets()},a}return Object(m.a)(e,t),Object(c.a)(e,[{key:"getMyTickets",value:function(){var t=localStorage.getItem("stations");return t?JSON.parse(t):[]}},{key:"displayTicket",value:function(t,e){return i.a.createElement("div",{key:e},i.a.createElement("p",null,t[0]," -> ",t[1],": ",t[2],"\u20ac"))}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"container"},i.a.createElement("h2",null,"Mes tickets"),this.state.tickets.map((function(e,a){return t.displayTicket(e,a)})))}}]),e}(n.Component),L=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(c.a)(e,[{key:"getEmail",value:function(){var t=localStorage.getItem("email");return t||""}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row profile-block"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(O,{firstName:"Maxime",lastName:"JOSIEN",email:this.getEmail()})),i.a.createElement("div",{className:"col-lg-6 border-tickets"},i.a.createElement(A,null))))}}]),e}(n.Component);function w(){var t=!1;return localStorage.getItem("auth_token")&&(t=!0),i.a.createElement("div",{className:"App"},i.a.createElement(p.a,null,i.a.createElement(h,{connected:t}),i.a.createElement(d.b,{path:"/login",component:b}),i.a.createElement(d.b,{path:"/logout",component:g}),i.a.createElement(d.b,{path:"/purchase",component:C}),i.a.createElement(d.b,{path:"/profile",component:L})))}a.d(e,"default",(function(){return w})),o.a.render(i.a.createElement(w,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.bddcd71c.chunk.js.map